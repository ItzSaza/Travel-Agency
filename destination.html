<!DOCTYPE html>
<html lang="en">
<head>
    <title>Destinations | Explore Sri Lanka</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
     
    <link rel="stylesheet" href="destination_Style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <style>
        body { scroll-behavior: smooth; }
        .highlight {
            background-color: #ffe066;
            color: #000;
            border-radius: 10px;
            padding: 10px;
            transition: 0.3s;
        }
        .message {
            margin-top: 15px;
            font-size: 16px;
            color: #333;
            font-style: italic;
        }
        .navbar-nav .nav-link:hover {
            background-color: #b3e5fc;
            color: #000 !important;
            border-radius: .375rem;
        }
        h1:hover {
            color: #ff9800;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top border-bottom">
  <div class="container">
    <a class="navbar-brand fw-semibold d-flex align-items-center" href="index.html">
      <i class="bi bi-compass text-primary me-2"></i> GoTrip
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="mainNav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="about.html">Guides</a></li>
        <li class="nav-item"><a class="nav-link active" aria-current="page" href="destination.html">Destinations</a></li>
        <li class="nav-item"><a class="nav-link" href="travellingmethods.html">Travelling Methods</a></li>
      </ul>

      <div class="d-flex gap-2">
        <a href="login.html" class="btn btn-outline-secondary btn-sm"><i class="bi bi-box-arrow-in-right me-1"></i>Login</a>
        <a href="register.html" class="btn btn-primary btn-sm"><i class="bi bi-person-plus me-1"></i>Sign Up</a>
      </div>
    </div>
  </div>
</nav>

<!-- Main Content -->
<div class="container">
  <h2>Popular Destinations</h2>
  <p>Discover places to visit in Sri Lanka.</p>

  <div class="row">
    <div class="col-md-4 text-center" id="item1">
      <img src="kandy.jpg" class="img-responsive img-rounded center-block" alt="Kandy" id="img1">
      <h4>Kandy</h4>
      <p>Famous for the Temple of the Tooth and its beautiful ancient Lake.</p>
    </div>

    <div class="col-md-4 text-center" id="item2">
      <img src="galle.jpg" class="img-responsive img-rounded center-block" alt="Galle" id="img2">
      <h4>Galle</h4>
      <p>Historic city with colonial charm and stunning beaches.</p>
    </div>

    <div class="col-md-4 text-center" id="item3">
      <img src="sigiriya.png" class="img-responsive img-rounded center-block" alt="Sigiriya" id="img3">
      <h4>Sigiriya</h4>
      <p>Explore the ancient rock fortress known as the “Lion Rock.”</p>
    </div>
  </div>

  <hr>

  <div class="row">
    <div class="col-md-4 text-center" id="item4">
      <img src="nuwara.jpg" class="img-responsive img-rounded center-block" alt="Nuwara Eliya" id="img4">
      <h4>Nuwara Eliya</h4>
      <p>Known as “Little England,” this hill town is surrounded by tea estates and cool weather.</p>
    </div>

    <div class="col-md-4 text-center" id="item5">
      <img src="ella.jpg" class="img-responsive img-rounded center-block" alt="Ella" id="img5">
      <h4>Ella</h4>
      <p>A peaceful mountain village with tea fields, waterfalls, and the famous Nine Arches Bridge.</p>
    </div>

    <div class="col-md-4 text-center" id="item6">
      <img src="anuradha.webp" class="img-responsive img-rounded center-block" alt="Anuradhapura" id="img6">
      <h4>Anuradhapura</h4>
      <p>An ancient city filled with historic temples and ruins of early Sri Lankan civilization.</p>
    </div>
  </div>

  <hr>

  <!-- Add Destination Button -->
  <div class="text-center mt-4">
    <button id="addDestinationBtn" class="btn btn-primary">+ Add Destination</button>
  </div>

  <!-- Hidden Form -->
  <div id="addDestinationForm" class="container mt-4" style="display:none;">
    <div class="card shadow-sm">
      <div class="card-body">
        <h4 class="text-center mb-3">Add a New Destination</h4>
        <form id="destinationForm">
          <input type="text" name="name" class="form-control mb-2" placeholder="Destination Name" required>
          <input type="text" name="description" class="form-control mb-2" placeholder="Description" required>
          <input type="text" name="image" class="form-control mb-2" placeholder="Image file (ex: kandy.jpg)" required>
          <input type="text" name="region" class="form-control mb-2" placeholder="Region" required>
          <input type="number" name="rating" class="form-control mb-2" placeholder="Rating (1–5)" required>
          <button type="submit" class="btn btn-success w-100">Save Destination</button>
        </form>
        <div id="addMsg" class="mt-3 text-center fw-semibold"></div>
      </div>
    </div>
  </div>

  <!-- Buttons and Messages -->
  <div class="text-center mt-4">
    <h3>Explore Destinations</h3>
    <button id="highlightAncient" class="btn btn-warning">Highlight Ancient Destinations</button>
    <button id="countDestinations" class="btn btn-info">Count Total Destinations</button>
    <button id="highlightLast" class="btn btn-success">Highlight Last Destination</button>
    <div class="message" id="messageArea"></div>
  </div>

  <div class="text-center mt-3">
    <button id="changeSrc" class="btn btn-primary">Change Image</button>
    <a href="index.html" class="btn btn-default">Back to Home</a>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Add Destination JS -->
<script>
  // Toggle form visibility
  $("#addDestinationBtn").click(function() {
    $("#addDestinationForm").slideToggle(400);
  });

  // Handle form submission
  $("#destinationForm").on("submit", function(e) {
    e.preventDefault();

    $.ajax({
      url: "saveData.php",
      type: "POST",
      data: $(this).serialize(),
      success: function(response) {
        if (response.message) {
          $("#addMsg").html("<span class='text-success'>" + response.message + "</span>");
        } else {
          $("#addMsg").html("<span class='text-danger'>Something went wrong.</span>");
        }

        // Instantly add new card
        const formData = Object.fromEntries(new FormData($("#destinationForm")[0]));
        const newCard = `
          <div class="col-md-4 text-center">
            <img src="${formData.image}" class="img-responsive img-rounded center-block" alt="${formData.name}">
            <h4>${formData.name}</h4>
            <p>${formData.description}</p>
          </div>
        `;
        $(".row").first().append(newCard);

        $("#destinationForm")[0].reset();
      },
      error: function() {
        $("#addMsg").html("<span class='text-danger'>Error saving destination.</span>");
      }
    });
  });
</script>

<!-- Other Buttons Script -->
<script>
  $('#highlightAncient').click(function() {
    $('.row > .col-md-4').each(function() {
      let desc = $(this).find('p').text().toLowerCase();
      if (desc.includes('ancient')) $(this).toggleClass('highlight');
    });
    $('#messageArea').text($('.highlight').length ? 'Highlighted ancient destinations.' : '');
  });

  let countToggled = false;
  $('#countDestinations').click(function() {
    if (!countToggled) $('#messageArea').text('Total destinations listed: ' + $('.row > .col-md-4').length);
    else $('#messageArea').text('');
    countToggled = !countToggled;
  });

  $('#highlightLast').click(function() {
    let lastDest = $('.row > .col-md-4').last();
    lastDest.toggleClass('highlight');
    $('#messageArea').text('Highlighting: ' + lastDest.find('h4').text());
  });

  $("#changeSrc").click(function() {
    $("#img1").attr("src", "kandyali.jpg");
    $("#img2").attr("src", "Galle (2).jpg");
    $("#img3").attr("src", "Sigiriya22.jpg");
    $("#img4").attr("src", "nuwaraeliya2.jpg");
    $("#img5").attr("src", "Ella2.jpg");
    $("#img6").attr("src", "ruwanweliseya.jpg");
  });

  $(".btn-default").click(function() {
    alert("Returning to Home Page");
  });
</script>

</body>
</html>
